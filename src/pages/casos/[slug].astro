---
import Layout from "../../layouts/Layout.astro";
import { getCollection } from "astro:content";
import ContactCTA from "../../components/ContactCTA.astro";

export async function getStaticPaths() {
  const casos = await getCollection("casos");

  return casos.map(caso => ({
    params: { slug: caso.slug },
    props: { caso }
  }));
}

const { caso } = Astro.props;
const project = caso.data;
---

<Layout
  title={`${project.title} | JJ Montalban`}
  page="page-casos"
  description="Caso de éxito desarrollado con WordPress, integraciones a medida y arquitectura técnica orientada a producción."
>
  <div class="container">

    <div class="back-nav-container">
      <a href="/casos" class="back-nav-button">
        <img src="/images/back.svg" alt="Volver" class="back-nav-img" />
        <span>Volver</span>
      </a>
    </div>

    <section class="content-container">

      <h1>{project.title}</h1>
      <p class="lead">{project["intro-detail"]}</p>
      {project.image && (
        <div class="case-hero">
          <img src={project.image} alt={project.title} loading="lazy" />
        </div>
      )}

      <section class="case-detail">

        {project.problem && (
          <div class="case-detail-section">
            <h2>El problema</h2>
            <p>{project.problem}</p>
          </div>
        )}

        {project.solution && (
          <div class="case-detail-section">
            <h2>La solución</h2>
            <p>{project.solution}</p>
          </div>
        )}

        {project.result && (
          <div class="case-detail-section">
            <h2>El Resultado</h2>
            <p>{project.result}</p>
          </div>
        )}

        {project.quote && (
          <div class="case-detail-section case-quote">
            <p class="case-quote-text">“{project.quote.text}”</p>
            <p class="case-quote-author">— {project.quote.author}</p>
          </div>
        )}

      </section>

    </section>
  </div>
      <ContactCTA
      title="¿Quieres resultados similares?"
      text="Estos proyectos partieron de una conversación como esta."
    />
  </div>
</Layout>
