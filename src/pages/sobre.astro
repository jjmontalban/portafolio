---
import Layout from "../layouts/Layout.astro";
import ContactCTA from "../components/ContactCTA.astro";
import { useTranslations, getSkillCategories, getJobs } from '../lib/i18n/utils';
import type { Lang } from '../lib/i18n/utils';

const lang: Lang = 'es';
const t = useTranslations(lang);
const skillCategories = getSkillCategories(t);
const jobs = getJobs(t);
---

<Layout 
  title={t('meta.title')} 
  page="page-about"
  description={t('meta.description')}
>
  <div class="container">
    
    <section class="section-about">
      <h2>Background</h2>
      <div>
        <p>{t('sobre.desc1')}</p>
      </div>
    </section>

    <section class="section-about">
      <h2>{t('sobre.skillsTitle')}</h2>
        <div class="skills-grid">
          {skillCategories.map(cat => (
            <div class="skill-column">
              <span class="skill-label">{cat.label}</span>
              <ul>{cat.items.map(item => <li>{item}</li>)}</ul>
            </div>
          ))}
        </div>
    </section>

    <section class="section-about">
      <h2>{t('sobre.experienceTitle')}</h2>
        <div>
          {jobs.map(job => (
            <div class="job-item">
              <div class="job-header">
                {job.link ? (
                  <a href={job.link} target="_blank" class="job__company">{job.company}</a>
                ) : (
                  <span class="job__company">{job.company}</span>
                )}
                <span class="job__period">{job.period}</span>
              </div>
              <div>{job.position}</div>
            </div>
          ))}
        <a href="https://www.linkedin.com/in/jjmontalban/" class="cta cta-primary">{t('sobre.downloadCV')}</a>
        </div>
        
    </section>

    <ContactCTA
      title={t('sobre.cta.title')}
      text={t('sobre.cta.text')}
      button={t('sobre.cta.button')}
    />
  </div>
</Layout>